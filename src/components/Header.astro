---
import Facebook from "../assets/svg/facebook.svg";
import LinkedIn from "../assets/svg/linkedin.svg";
import YouTube from "../assets/svg/youtube.svg";
import Instagram from "../assets/svg/instagram.svg";
import MapPin from "../assets/svg/location.svg";
import Phone from "../assets/svg/phone.svg";
---

<header id="hero">
  <!-- HEADER ESCRITORIO -->
  <div
    class="header-top w-full bg-[#101828] text-white pt-[18px] pb-[55px] transition-all duration-200 hidden md:block"
  >
    <div
      class="max-w-6xl mx-auto w-full flex items-center justify-between px-4"
    >
      <div class="flex items-center justify-start">
        <span>Capacitacion Personal TcT</span>
      </div>
      <div class="flex items-center gap-25">
        <div class="flex items-center gap-2">
          <a
            href="https://www.google.com/maps/place/35%C2%B015'42.8%22S+71%C2%B029'12.5%22W/@-35.261967,-71.486825,15z/data=!4m4!3m3!8m2!3d-35.2618889!4d-71.4868056?hl=es&entry=ttu&g_ep=EgoyMDI1MDkxMC4wIKXMDSoASAFQAw%3D%3D"
            class="flex items-center gap-2 text-white"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Ver ubicación en Google Maps"
          >
            <MapPin class="size-6" />
            <span>Ruta 5 sur Km 229,4 San Rafael, Chile</span>
          </a>
        </div>
        <div class="flex items-center gap-2">
          <a
            href="tel:+56912345678"
            class="flex items-center gap-2 text-white"
            aria-label="Llamar al telefono"
          >
            <Phone class="size-6" />
            <span>+56 9 4281 3768</span>
          </a>
        </div>
        <div class="flex gap-4">
          <a
            href="https://facebook.com"
            target="_blank"
            class="size-7 hover:scale-125 transition"
            aria-label="Facebook"><Facebook /></a
          >
          <a
            href="https://www.linkedin.com"
            target="_blank"
            class="size-7 hover:scale-125 transition"
            aria-label="LinkedIn"><LinkedIn /></a
          >
          <a
            href="https://www.youtube.com"
            target="_blank"
            class="size-7 hover:scale-125 transition"
            aria-label="YouTube"><YouTube /></a
          >
        </div>
      </div>
    </div>
  </div>

  <div
    class="header-bottom fixed z-20 left-1/2 transform -translate-x-1/2 top-[60px] w-full max-w-[1200px] text-[16px] leading-[1.6] box-border transition-all duration-200 hidden md:block"
  >
    <div class="container w-full justify-center mx-auto md:max-w-[1120px]">
      <div
        class="header-bottom-row flex items-center justify-between bg-[#E5E9F7] text-black shadow-sm"
      >
        <div
          class="header-logo flex items-center justify-center gap-5 pt-[15px] pr-[60px] pb-[15px] pl-[40px] bg-white [clip-path:polygon(0px_0px,100%_0%,82.68%_101.20%,0px_100%)]"
        >
          <a href="#hero">
            <img src="/images/logo.webp" alt="Capacitacion" class="h-12" />
          </a>
          <span class="text-[#18343b] text-lg font-bold">Mar Otec</span>
        </div>
        <nav class="header-nav block">
          <ul
            class="flex items-center justify-between gap-10 px-12 text-lg font-medium text-black"
          >
            <li>
              <a class="hover:text-[#5372F0] transition" href="#hero">Inicio</a>
            </li>
            <li>
              <a class="hover:text-[#5372F0] transition" href="#services"
                >Servicios</a
              >
            </li>
            <li>
              <a class="hover:text-[#5372F0] transition" href="#about"
                >Sobre Nosotros</a
              >
            </li>
            <li>
              <a class="hover:text-[#5372F0] transition" href="#team">Equipo</a>
            </li>
            <li>
              <a class="hover:text-[#5372F0] transition" href="#contact"
                >Contacto</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>

  <!-- HEADER CELULAR -->
  <div
    class="md:hidden fixed top-0 left-0 w-full bg-[#101828] text-white px-4 py-3 flex items-center justify-between z-50"
  >
    <a href="#hero" class="flex items-center gap-2">
      <img src="/images/logo.webp" alt="Mar otec Logo" class="h-10" />
      <span class="font-bold text-lg">Mar Otec</span>
    </a>
    <button id="menu-toggle" class="text-white focus:outline-none z-50">
      <svg
        class="w-8 h-8"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- MENÚ HAMBURGUESA  -->
  <nav
    id="mobile-nav"
    class="fixed top-[64px] left-0 w-full bg-[#101828] text-white px-4 py-4 space-y-3 text-center z-40 opacity-0 scale-y-95 transform transition-all duration-300 ease-in-out pointer-events-none"
  >
    <a href="#hero" class="block hover:text-[#5372F0] transition">Inicio</a>
    <a href="#services" class="block hover:text-[#5372F0] transition"
      >Servicios</a
    >
    <a href="#about" class="block hover:text-[#5372F0] transition"
      >Sobre Nosotros</a
    >
    <a href="#team" class="block hover:text-[#5372F0] transition">Equipo</a>
    <a href="#contact" class="block hover:text-[#5372F0] transition">Contacto</a
    >
  </nav>
</header>

<script is:inline>
  const toggleBtn = document.getElementById("menu-toggle");
  const mobileNav = document.getElementById("mobile-nav");

  toggleBtn?.addEventListener("click", () => {
    const isOpen = !mobileNav.classList.contains("opacity-100");

    if (isOpen) {
      mobileNav.classList.remove(
        "opacity-0",
        "scale-y-95",
        "pointer-events-none",
      );
      mobileNav.classList.add(
        "opacity-100",
        "scale-y-100",
        "pointer-events-auto",
      );
    } else {
      mobileNav.classList.remove(
        "opacity-100",
        "scale-y-100",
        "pointer-events-auto",
      );
      mobileNav.classList.add("opacity-0", "scale-y-95", "pointer-events-none");
    }
  });

  document.querySelectorAll("#mobile-nav a").forEach((link) =>
    link.addEventListener("click", () => {
      mobileNav.classList.remove(
        "opacity-100",
        "scale-y-100",
        "pointer-events-auto",
      );
      mobileNav.classList.add("opacity-0", "scale-y-95", "pointer-events-none");
    }),
  );
</script>

<script>
  let lastScroll = 0;
  const headerTop = document.querySelector(".header-top");
  const headerBottom = document.querySelector(".header-bottom");

  window.addEventListener("scroll", () => {
    const currentScroll = window.scrollY;

    if (!headerTop || !headerBottom) return;

    if (currentScroll > 50) {
      (headerTop as HTMLElement).style.transform = "translateY(-100%)";
      (headerBottom as HTMLElement).style.top = "0";
      (headerBottom as HTMLElement).style.position = "fixed";
    } else {
      (headerTop as HTMLElement).style.transform = "translateY(0)";
      (headerBottom as HTMLElement).style.top = "60px";
    }

    lastScroll = currentScroll;
  });
</script>
